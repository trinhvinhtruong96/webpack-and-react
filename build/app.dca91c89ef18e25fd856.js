"use strict";(self.webpackChunkwebpack_and_react=self.webpackChunkwebpack_and_react||[]).push([[143],{4434:(e,t,n)=>{var r=n(7294),o=n(745),i=["value","onEdit","onValueClick","editing","onDelete"];function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const l=function(e){var t=e.value,n=e.onEdit,o=e.onValueClick,l=e.editing,u=e.onDelete,c=a(e,i),s=function(e){var t=e.target.value;n&&n(t)},f=function(e){"Enter"===e.key&&s(e)};return r.createElement("div",c,l?r.createElement("input",{type:"text",ref:function(e){e&&(e.selectionStart=t.length)},autoFocus:!0,defaultValue:t,onBlur:s,onKeyDown:f}):r.createElement("div",{onClick:o},r.createElement("span",{className:"value"},t),u?r.createElement("button",{onClick:u,className:"delete"},"x"):null))};var u=n(6487),c=n(994);const s="note";var f=["id","onMove","editing"];function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const v=function(e){var t=e.id,n=e.onMove,o=e.editing,i=m(e,f),a=d((0,u.c)((function(){return{type:s,item:{id:t},collect:function(e){return{isDragging:!!e.isDragging()}}}})),2),l=(a[0].isDragging,a[1]),y=d((0,c.L)((function(){return{accept:s,drop:function(e){n({sourceId:e.id,targetId:t})},collect:function(e){return{isOver:!!e.isOver()}}}}),[]),2),v=(y[0].isOver,y[1]);return r.createElement("div",{ref:v},r.createElement("div",{ref:o?void 0:l},r.createElement("li",i,i.children)))};var p=n(4554),b=n.n(p),g=n(4355),h=n.n(g),O=new(b());h()(O);const S=O,E=S.generateActions("create","update","delete","attachToLane","detachFromLane","move"),k=function(e){var t=e.notes,n=e.onEdit,o=e.onDelete,i=e.onValueClick;return r.createElement("ul",{className:"notes"},t.map((function(e){return r.createElement(v,{className:"note",id:e.id,key:e.id,editing:e.editing,onMove:E.move},r.createElement(l,{editing:e.editing,value:e.task,onValueClick:function(){return i(e.id)},onEdit:function(t){return n(e.id,t)},onDelete:function(t){return o(e.id,t)}}))})))},j=S.generateActions("create","update","delete");var w=n(4586);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===I(i)?i:String(i)),r)}var o,i}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bindActions(j),this.notes=[],this.exportPublicMethods({getNotesByIds:this.getNotesByIds.bind(this)})}var t,n,r;return t=e,(n=[{key:"create",value:function(e){var t=this.notes;return e.id=(0,w.Z)(),this.setState({notes:t.concat(e)}),e}},{key:"update",value:function(e){var t=this.notes.map((function(t){return t.id===e.id?Object.assign({},t,e):t}));this.setState({notes:t})}},{key:"delete",value:function(e){this.setState({notes:this.notes.filter((function(t){return t.id!==e}))})}},{key:"getNotesByIds",value:function(e){var t=this;return(e||[]).map((function(e){return t.notes.filter((function(t){return t.id===e}))})).filter((function(e){return e.length})).map((function(e){return e[0]}))}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const A=S.createStore(P,"NoteStore");var C=n(4015),x=n.n(C),D=["lane"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const V=function(e){var t=e.lane,n=M(e,D),o=T((0,c.L)((function(){return{accept:s,drop:function(e){t.notes.length||E.attachToLane({laneId:t.id,noteId:e.id})},collect:function(e){return{isOver:!!e.isOver()}}}}),[]),2),i=(o[0].isOver,o[1]);return r.createElement("div",L({},n,{ref:i}),r.createElement("div",{className:"lane-header",onClick:function(){var e=t.id;E.update({id:e,editing:!0})}},r.createElement("div",{className:"lane-add-note"},r.createElement("button",{onClick:function(){var e=t.id,n=j.create({task:"New task"});E.attachToLane({noteId:n.id,laneId:e})}},"+")),r.createElement(l,{className:"lane-name",editing:t.editing,value:t.name,onEdit:function(e){var n=t.id;e.trim()?E.update({id:n,name:e,editing:!1}):E.update({id:n,editing:!1})}}),r.createElement("div",{className:"lane-delete"},r.createElement("button",{onClick:function(){var e=t.id;E.delete(e)}},"x"))),r.createElement(x(),{stores:[A],inject:{notes:function(){return A.getNotesByIds(t.notes)}}},r.createElement(k,{onEdit:function(e,t){t.trim()?j.update({id:e,task:t,editing:!1}):j.update({id:e,editing:!1})},onDelete:function(e,n){n.stopPropagation();var r=t.id;E.detachFromLane({laneId:r,noteId:e}),j.delete(e)},onValueClick:function(e){j.update({id:e,editing:!0})}})))},F=function(e){var t=e.lanes;return r.createElement("div",{className:"lanes"},t.map((function(e){return r.createElement(V,{className:"lane",key:e.id,lane:e})})))};var _=n(9766),$=n.n(_);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===J(i)?i:String(i)),r)}var o,i}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bindActions(E),this.lanes=[]}var t,n,r;return t=e,(n=[{key:"create",value:function(e){var t=this.lanes;e.id=(0,w.Z)(),e.notes=e.notes||[],this.setState({lanes:t.concat(e)})}},{key:"update",value:function(e){var t=this.lanes.map((function(t){return t.id===e.id?Object.assign({},t,e):t}));this.setState({lanes:t})}},{key:"delete",value:function(e){this.setState({lanes:this.lanes.filter((function(t){return t.id!==e}))})}},{key:"attachToLane",value:function(e){var t=e.laneId,n=e.noteId,r=this.lanes.map((function(e){return e.notes.includes(n)&&(e.notes=e.notes.filter((function(e){return e!==n}))),e.id===t&&(e.notes.includes(n)?console.warn("Already attached note to lane",r):e.notes.push(n)),e}));this.setState({lanes:r})}},{key:"detachFromLane",value:function(e){var t=e.laneId,n=e.noteId,r=this.lanes.map((function(e){return e.id===t&&(e.notes=e.notes.filter((function(e){return e!==n}))),e}));this.setState({lanes:r})}},{key:"move",value:function(e){var t=e.sourceId,n=e.targetId,r=this.lanes,o=r.filter((function(e){return e.notes.includes(t)}))[0],i=r.filter((function(e){return e.notes.includes(n)}))[0],a=o.notes.indexOf(t),l=i.notes.indexOf(n);o===i?o.notes=$()(o.notes,{$splice:[[a,1],[l,0,t]]}):(o.notes.splice(a,1),i.notes.splice(l,0,t)),this.setState({lanes:r})}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const K=S.createStore(Z,"LaneStore");var W=n(1261),q=n(7384);const z=function(){return r.createElement(W.W,{backend:q.PD},r.createElement("div",null,r.createElement("button",{className:"add-notes",onClick:function(){E.create({name:"New lane"})}},"+"),r.createElement(x(),{stores:[K],inject:{lanes:function(){return K.getState().lanes}}},r.createElement(F,null))))},G={get:function(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}};var H=n(7681),Q=n.n(H);var R=document.getElementById("app"),X=o.s(R);!function(e,t,n){var r=Q()(e);try{e.bootstrap(t.get(n))}catch(e){console.error("Failed to bootstrap data",e)}r.listen((function(){t.get("debug")||t.set(n,e.takeSnapshot())}))}(S,G,"app"),X.render(r.createElement(z,null))}},e=>{e.O(0,[714,709],(()=>{return t=4434,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=app.dca91c89ef18e25fd856.js.map